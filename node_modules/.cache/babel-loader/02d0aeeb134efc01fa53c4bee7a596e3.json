{"ast":null,"code":"import { getError, getErrorByCode, isReservedErrorCode } from \"./error\";\nimport { INTERNAL_ERROR, SERVER_ERROR } from \"./constants\";\nexport function payloadId() {\n  var date = Date.now() * Math.pow(10, 3);\n  var extra = Math.floor(Math.random() * Math.pow(10, 3));\n  return date + extra;\n}\nexport function formatJsonRpcRequest(method, params, id) {\n  return {\n    id: id || payloadId(),\n    jsonrpc: \"2.0\",\n    method: method,\n    params: params\n  };\n}\nexport function formatJsonRpcResult(id, result) {\n  return {\n    id: id,\n    jsonrpc: \"2.0\",\n    result: result\n  };\n}\nexport function formatJsonRpcError(id, error) {\n  return {\n    id: id,\n    jsonrpc: \"2.0\",\n    error: formatErrorMessage(error)\n  };\n}\nexport function formatErrorMessage(error) {\n  if (typeof error === \"undefined\") {\n    return getError(INTERNAL_ERROR);\n  }\n\n  if (typeof error === \"string\") {\n    error = Object.assign(Object.assign({}, getError(SERVER_ERROR)), {\n      message: error\n    });\n  }\n\n  if (isReservedErrorCode(error.code)) {\n    error = getErrorByCode(error.code);\n  }\n\n  return error;\n}","map":{"version":3,"mappings":"AAAA,SAASA,QAAT,EAAmBC,cAAnB,EAAmCC,mBAAnC,QAAiF,SAAjF;AACA,SAASC,cAAT,EAAyBC,YAAzB,QAA6C,aAA7C;AAGA,OAAM,SAAUC,SAAV,GAAmB;EACvB,IAAMC,IAAI,GAAGC,IAAI,CAACC,GAAL,KAAaC,IAAI,CAACC,GAAL,CAAS,EAAT,EAAa,CAAb,CAA1B;EACA,IAAMC,KAAK,GAAGF,IAAI,CAACG,KAAL,CAAWH,IAAI,CAACI,MAAL,KAAgBJ,IAAI,CAACC,GAAL,CAAS,EAAT,EAAa,CAAb,CAA3B,CAAd;EACA,OAAOJ,IAAI,GAAGK,KAAd;AACD;AAED,OAAM,SAAUG,oBAAV,CACJC,MADI,EAEJC,MAFI,EAGJC,EAHI,EAGO;EAEX,OAAO;IACLA,EAAE,EAAEA,EAAE,IAAIZ,SAAS,EADd;IAELa,OAAO,EAAE,KAFJ;IAGLH,MAAM,EAANA,MAHK;IAILC,MAAM,EAANA;EAJK,CAAP;AAMD;AAED,OAAM,SAAUG,mBAAV,CAAuCF,EAAvC,EAAmDG,MAAnD,EAA4D;EAChE,OAAO;IACLH,EAAE,EAAFA,EADK;IAELC,OAAO,EAAE,KAFJ;IAGLE,MAAM,EAANA;EAHK,CAAP;AAKD;AAED,OAAM,SAAUC,kBAAV,CAA6BJ,EAA7B,EAAyCK,KAAzC,EAAuE;EAC3E,OAAO;IACLL,EAAE,EAAFA,EADK;IAELC,OAAO,EAAE,KAFJ;IAGLI,KAAK,EAAEC,kBAAkB,CAACD,KAAD;EAHpB,CAAP;AAKD;AAED,OAAM,SAAUC,kBAAV,CAA6BD,KAA7B,EAA2D;EAC/D,IAAI,OAAOA,KAAP,KAAiB,WAArB,EAAkC;IAChC,OAAOtB,QAAQ,CAACG,cAAD,CAAf;EACD;;EACD,IAAI,OAAOmB,KAAP,KAAiB,QAArB,EAA+B;IAC7BA,KAAK,mCACAtB,QAAQ,CAACI,YAAD,CADR,GACsB;MACzBoB,OAAO,EAAEF;IADgB,CADtB,CAAL;EAID;;EACD,IAAIpB,mBAAmB,CAACoB,KAAK,CAACG,IAAP,CAAvB,EAAqC;IACnCH,KAAK,GAAGrB,cAAc,CAACqB,KAAK,CAACG,IAAP,CAAtB;EACD;;EACD,OAAOH,KAAP;AACD","names":["getError","getErrorByCode","isReservedErrorCode","INTERNAL_ERROR","SERVER_ERROR","payloadId","date","Date","now","Math","pow","extra","floor","random","formatJsonRpcRequest","method","params","id","jsonrpc","formatJsonRpcResult","result","formatJsonRpcError","error","formatErrorMessage","message","code"],"sourceRoot":"","sources":["../../src/format.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}